/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package br.edu.imepac.administrativo.telas;

import br.edu.imepac.administrativo.entidades.Perfil;

import java.awt.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import javax.swing.JOptionPane;

/**
 *
 * @author elias
 */
public class CadastrarPerfil extends javax.swing.JFrame {

    /*
    private javax.swing.JButton AbrirListagem;
    private javax.swing.JButton BotaoVoltar;
    private javax.swing.JButton BotãoLimpar;
    private javax.swing.JButton BotãoSalvar;
    private javax.swing.JCheckBox JCadm;
    private javax.swing.JCheckBox JCfu;
    private javax.swing.JCheckBox JCmedico;
    private javax.swing.JTextField JFnome;
    private javax.swing.JTextArea JTAd;
    private javax.swing.JLabel LabelCodigo;
    private javax.swing.JLabel NomeLabel;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScrollPane1;
    
    
    /*
     * Creates new form CadastrarConvenio
     */
    public CadastrarPerfil() {
        initComponents();
        setLocationRelativeTo(null);
    }

    CadastrarPerfil(Connection conn) {
        throw new UnsupportedOperationException("Not supported yet."); 
// Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/GeneratedMethodBody
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        JFnome = new javax.swing.JTextField();
        NomeLabel = new javax.swing.JLabel();
        BotãoSalvar = new javax.swing.JButton();
        BotãoLimpar = new javax.swing.JButton();
        BotaoVoltar = new javax.swing.JButton();
        AbrirListagem = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        JCadm = new javax.swing.JCheckBox();
        JCfu = new javax.swing.JCheckBox();
        JCConveini = new javax.swing.JCheckBox();
        jLabel2 = new javax.swing.JLabel();
        JCEspecialidade = new javax.swing.JCheckBox();
        JCProntuario = new javax.swing.JCheckBox();
        JCConsulta = new javax.swing.JCheckBox();
        JCPaciente = new javax.swing.JCheckBox();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setResizable(false);
        getContentPane().setLayout(null);

        JFnome.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JFnomeActionPerformed(evt);
            }
        });
        getContentPane().add(JFnome);
        JFnome.setBounds(80, 70, 260, 33);

        NomeLabel.setText("Nome");
        getContentPane().add(NomeLabel);
        NomeLabel.setBounds(40, 80, 40, 16);

        BotãoSalvar.setText("SALVAR");
        BotãoSalvar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BotãoSalvarActionPerformed(evt);
            }
        });
        getContentPane().add(BotãoSalvar);
        BotãoSalvar.setBounds(10, 230, 118, 35);

        BotãoLimpar.setText("LIMPAR");
        BotãoLimpar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BotãoLimparActionPerformed(evt);
            }
        });
        getContentPane().add(BotãoLimpar);
        BotãoLimpar.setBounds(150, 230, 120, 35);

        BotaoVoltar.setText("Voltar");
        BotaoVoltar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BotaoVoltarActionPerformed(evt);
            }
        });
        getContentPane().add(BotaoVoltar);
        BotaoVoltar.setBounds(550, 10, 80, 23);

        AbrirListagem.setText("Listar Perfil");
        AbrirListagem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AbrirListagemActionPerformed(evt);
            }
        });
        getContentPane().add(AbrirListagem);
        AbrirListagem.setBounds(20, 280, 250, 40);

        jLabel1.setText("Tipo");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(40, 110, 37, 16);

        JCadm.setText("Adm");
        JCadm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JCadmActionPerformed(evt);
            }
        });
        getContentPane().add(JCadm);
        JCadm.setBounds(100, 190, 49, 20);

        JCfu.setText("Funcionário");
        getContentPane().add(JCfu);
        JCfu.setBounds(40, 150, 100, 20);

        JCConveini.setText("Convenio");
        getContentPane().add(JCConveini);
        JCConveini.setBounds(130, 130, 80, 20);

        jLabel2.setFont(new java.awt.Font("Segoe UI", 0, 24)); // NOI18N
        jLabel2.setText("CADASTRAR PERFIL");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(80, 20, 220, 32);

        JCEspecialidade.setText("Especialidade");
        getContentPane().add(JCEspecialidade);
        JCEspecialidade.setBounds(130, 150, 94, 20);

        JCProntuario.setText("Prontuario");
        getContentPane().add(JCProntuario);
        JCProntuario.setBounds(130, 170, 80, 20);

        JCConsulta.setText("Consulta");
        getContentPane().add(JCConsulta);
        JCConsulta.setBounds(40, 170, 90, 20);

        JCPaciente.setText("Paciente");
        JCPaciente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JCPacienteActionPerformed(evt);
            }
        });
        getContentPane().add(JCPaciente);
        JCPaciente.setBounds(40, 130, 80, 20);

        jLabel3.setText("O tipo define as alterações e visualização do perfil exemplo, perfi do tipo adm");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(230, 140, 410, 20);

        jLabel4.setText("pode alterar e vizualizar qualquer coisa.");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(240, 160, 220, 16);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void JFnomeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JFnomeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JFnomeActionPerformed

    private void BotãoSalvarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BotãoSalvarActionPerformed
    
    try {  
       
        // Verificar se todos os campos obrigatórios foram preenchidos
        if (JFnome.getText().trim().isEmpty()) {
            JOptionPane.showMessageDialog(this, 
                    "O campo 'Nome' é obrigatório!", 
                    "Aviso", JOptionPane.WARNING_MESSAGE);
            return;
        }

        String tipo = " ";
        if (JCConveini.isSelected()) {
            tipo += "Convenio";
        }
   
        if (JCPaciente.isSelected()) {
            tipo += "Paciente";
        }
 
        if (JCConsulta.isSelected()) {
            tipo += "Consulta";
        }
         
        if (JCEspecialidade.isSelected()) {
            tipo += "Especialidade";
        }
      
        if (JCProntuario.isSelected()) {
            tipo += "Prontuario";
        }
        if (JCadm.isSelected()) {
            tipo += "adm";
        }
         
        if (JCfu.isSelected()) {
            tipo += "funcionario";
        }
        
        if (! tipo.isEmpty()) {
            JOptionPane.showMessageDialog(this,
                    "Nehum tipo foi selecionado.");
        }

        

        // Criar o objeto 
        Perfil Perfils = new Perfil();
        Perfils.setnome(JFnome.getText());
        //Perfils.settipo(.getCheck())
  
        // Configurações do banco de dados
        String url = "jdbc:mysql://localhost:3306"; // Substitua pelo nome do seu banco
        String user = "root"; // Substitua pelo seu usuário do MySQL
        String password = "root"; // Substitua pela sua senha do MySQL

        // Conexão e inserção no banco
        String sql = "INSERT INTO Perfil (nome,"
                + " tipo) VALUES (?, ? )";

        try (Connection connection = DriverManager.getConnection(url, user, password);
             PreparedStatement stmt = connection.prepareStatement(sql)) {

            // Preenchendo os valores no PreparedStatement
            stmt.setString(1, Perfils.getnome());
          //  stmt.setString(3, Perfils.getdescricao());
            stmt.setString(4, Perfils.gettipo());
        
            // Executa a inserção
            stmt.executeUpdate();
            JOptionPane.showMessageDialog(this, "Paciente salvo com sucesso!");
        } catch (SQLException e) {
            JOptionPane.showMessageDialog(this, "Erro ao salvar no banco de dados: "
                    + e.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }
    catch (HeadlessException e) {
        throw new RuntimeException(e);
    }


        JOptionPane.showMessageDialog(this, "Perfil salvo com sucesso!");
    abrirListagemConvenio(); // Abre a tela de listagem

    
    }//GEN-LAST:event_BotãoSalvarActionPerformed

    private void BotaoVoltarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BotaoVoltarActionPerformed

      // TelaLobby telaLobby = new TelaLobby(); 
      // telaLobby.setVisible(true); 
      //  this.dispose(); 
    }//GEN-LAST:event_BotaoVoltarActionPerformed

    private void AbrirListagemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AbrirListagemActionPerformed
        // TODO add your handling code here:
    ListagemPaciente listagempaciente = new ListagemPaciente();
    listagempaciente.setVisible(true);
    this.dispose();
    
    }//GEN-LAST:event_AbrirListagemActionPerformed

    private void BotãoLimparActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BotãoLimparActionPerformed
        // TODO add your handling code here:
         // Limpar os campos de texto
    JFnome.setText("");
   // JTAd.setText("");
    //JCConveini.setText("");
  //  JCadm.setText("");
 //   JCfu.setText("");

    // Desmarcar a caixa de seleção
    
    }//GEN-LAST:event_BotãoLimparActionPerformed

    private void JCadmActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JCadmActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JCadmActionPerformed

    private void JCPacienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JCPacienteActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JCPacienteActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(CadastrarPerfil.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> {
            new CadastrarPerfil().setVisible(true);
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton AbrirListagem;
    private javax.swing.JButton BotaoVoltar;
    private javax.swing.JButton BotãoLimpar;
    private javax.swing.JButton BotãoSalvar;
    private javax.swing.JCheckBox JCConsulta;
    private javax.swing.JCheckBox JCConveini;
    private javax.swing.JCheckBox JCEspecialidade;
    private javax.swing.JCheckBox JCPaciente;
    private javax.swing.JCheckBox JCProntuario;
    private javax.swing.JCheckBox JCadm;
    private javax.swing.JCheckBox JCfu;
    private javax.swing.JTextField JFnome;
    private javax.swing.JLabel NomeLabel;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    // End of variables declaration//GEN-END:variables

    private void abrirListagemConvenio() {
        throw new UnsupportedOperationException("Not supported yet."); // Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/GeneratedMethodBody
    }



}

